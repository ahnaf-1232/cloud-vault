(()=>{var e={};e.id=357,e.ids=[357],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},795:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>r.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>o}),a(1052),a(4389),a(546);var l=a(170),t=a(5002),i=a(3876),r=a.n(i),n=a(6299),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(s,d);let o=["",{children:["files",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,1052)),"E:\\cloud-vault\\app\\files\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(a.bind(a,3667)),"E:\\cloud-vault\\app\\files\\loading.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,4389)),"E:\\cloud-vault\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,546)),"E:\\cloud-vault\\app\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["E:\\cloud-vault\\app\\files\\page.tsx"],u="/files/page",p={require:a,loadChunk:()=>Promise.resolve()},x=new l.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/files/page",pathname:"/files",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},5209:(e,s,a)=>{Promise.resolve().then(a.bind(a,6630))},6630:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>v});var l=a(7247),t=a(8964),i=a(8649),r=a(458),n=a(8557),d=a(7589),o=a(8053),c=a(6991),u=a(7757),p=a(4662),x=a(4049),m=a(9964),f=a(9256),h=a(594),j=a(906);function v(){let[e,s]=(0,t.useState)([]),[a,v]=(0,t.useState)(!0),[g,b]=(0,t.useState)(""),[y,w]=(0,t.useState)("uploadedAt"),[N,P]=(0,t.useState)("desc"),[U,S]=(0,t.useState)("table"),{toast:k}=(0,j.pm)(),C=async()=>{try{v(!0);let e=await h.b.getFiles(g,{sortBy:y,sortOrder:N});s(e.files||[])}catch(e){k({title:"Error",description:"Failed to load files. Please try again.",variant:"destructive"})}finally{v(!1)}},E=()=>{C()},F=async a=>{try{await h.b.deleteFile(a),s(e.filter(e=>e._id!==a)),k({title:"Success",description:"File deleted successfully."})}catch(e){k({title:"Error",description:"Failed to delete file. Please try again.",variant:"destructive"})}},_=async(e,s)=>{try{let a=await h.b.downloadFile(e),l=window.URL.createObjectURL(a),t=document.createElement("a");t.href=l,t.download=s,document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(l),document.body.removeChild(t)}catch(e){k({title:"Error",description:"Failed to download file. Please try again.",variant:"destructive"})}},R=e.filter(e=>e.name.toLowerCase().includes(g.toLowerCase()));return l.jsx(i.i,{children:(0,l.jsxs)("div",{className:"min-h-screen bg-background",children:[l.jsx(r.w,{}),(0,l.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,l.jsxs)("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold mb-2",children:"My Files"}),l.jsx("p",{className:"text-muted-foreground",children:"Manage and organize your uploaded files"})]}),(0,l.jsxs)(p.mQ,{defaultValue:"files",className:"space-y-6",children:[(0,l.jsxs)(p.dr,{children:[l.jsx(p.SP,{value:"files",children:"All Files"}),l.jsx(p.SP,{value:"upload",children:"Upload Files"})]}),l.jsx(p.nU,{value:"upload",children:(0,l.jsxs)(u.Zb,{children:[(0,l.jsxs)(u.Ol,{children:[(0,l.jsxs)(u.ll,{className:"flex items-center gap-2",children:[l.jsx(m.Z,{className:"h-5 w-5"}),"Upload Files"]}),l.jsx(u.SZ,{children:"Upload new files to your CloudVault storage"})]}),l.jsx(u.aY,{children:l.jsx(n.p,{onUploadComplete:C})})]})}),(0,l.jsxs)(p.nU,{value:"files",className:"space-y-6",children:[l.jsx(u.Zb,{children:l.jsx(u.aY,{className:"pt-6",children:(0,l.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,l.jsxs)("div",{className:"flex-1 flex gap-2",children:[(0,l.jsxs)("div",{className:"relative flex-1",children:[l.jsx(f.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(c.I,{placeholder:"Search files...",value:g,onChange:e=>b(e.target.value),className:"pl-10",onKeyPress:e=>"Enter"===e.key&&E()})]}),l.jsx(o.z,{onClick:E,children:l.jsx(f.Z,{className:"h-4 w-4"})})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)(x.Ph,{value:y,onValueChange:w,children:[l.jsx(x.i4,{className:"w-[140px]",children:l.jsx(x.ki,{placeholder:"Sort by"})}),(0,l.jsxs)(x.Bw,{children:[l.jsx(x.Ql,{value:"name",children:"Name"}),l.jsx(x.Ql,{value:"size",children:"Size"}),l.jsx(x.Ql,{value:"uploadedAt",children:"Date"}),l.jsx(x.Ql,{value:"type",children:"Type"})]})]}),(0,l.jsxs)(x.Ph,{value:N,onValueChange:e=>P(e),children:[l.jsx(x.i4,{className:"w-[100px]",children:l.jsx(x.ki,{})}),(0,l.jsxs)(x.Bw,{children:[l.jsx(x.Ql,{value:"asc",children:"Asc"}),l.jsx(x.Ql,{value:"desc",children:"Desc"})]})]})]})]})})}),(0,l.jsxs)(u.Zb,{children:[l.jsx(u.Ol,{children:(0,l.jsxs)(u.ll,{children:["Files (",R.length,")"]})}),l.jsx(u.aY,{children:l.jsx(d.$,{files:R,loading:a,onDelete:F,onDownload:_})})]})]})]})]})]})})}},8557:(e,s,a)=>{"use strict";a.d(s,{p:()=>x});var l=a(7247),t=a(8964),i=a(1290),r=a(8053),n=a(4367),d=a(9964),o=a(9055),c=a(7013),u=a(906),p=a(594);function x({onUploadComplete:e}={}){let[s,a]=(0,t.useState)([]),[x,m]=(0,t.useState)(!1),[f,h]=(0,t.useState)(0),{toast:j}=(0,u.pm)(),v=(0,t.useCallback)(e=>{a(e.map(e=>Object.assign(e,{preview:URL.createObjectURL(e)})))},[]),{getRootProps:g,getInputProps:b,isDragActive:y}=(0,i.uI)({onDrop:v,multiple:!0}),w=e=>{a(s.filter(s=>s!==e)),e.preview&&URL.revokeObjectURL(e.preview)},N=async()=>{if(0!==s.length){m(!0),h(0);try{for(let e=0;e<s.length;e++)await p.b.uploadFile(s[e]),h((e+1)/s.length*100);j({title:"Upload Successful",description:`${s.length} file(s) uploaded successfully.`}),e&&e(),s.forEach(e=>{e.preview&&URL.revokeObjectURL(e.preview)}),a([])}catch(e){j({title:"Upload Failed",description:"Failed to upload files. Please try again.",variant:"destructive"})}finally{m(!1),h(0)}}},P=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return Number.parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]};return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{...g(),className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors ${y?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}`,children:[l.jsx("input",{...b()}),l.jsx(d.Z,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),y?l.jsx("p",{children:"Drop the files here..."}):(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-lg font-medium",children:"Drag & drop files here"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"or click to browse"})]})]}),s.length>0&&(0,l.jsxs)("div",{className:"space-y-2",children:[l.jsx("h4",{className:"font-medium",children:"Selected Files:"}),s.map((e,s)=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[l.jsx(o.Z,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm",children:e.name}),(0,l.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",P(e.size),")"]})]}),l.jsx(r.z,{variant:"ghost",size:"sm",onClick:()=>w(e),disabled:x,children:l.jsx(c.Z,{className:"h-4 w-4"})})]},s))]}),x&&(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{children:"Uploading..."}),(0,l.jsxs)("span",{children:[Math.round(f),"%"]})]}),l.jsx(n.E,{value:f})]}),s.length>0&&l.jsx(r.z,{onClick:N,disabled:x,className:"w-full",children:x?"Uploading...":`Upload ${s.length} file(s)`})]})}},4367:(e,s,a)=>{"use strict";a.d(s,{E:()=>n});var l=a(7247),t=a(8964),i=a(9768),r=a(5008);let n=t.forwardRef(({className:e,value:s,...a},t)=>l.jsx(i.fC,{ref:t,className:(0,r.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...a,children:l.jsx(i.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));n.displayName=i.fC.displayName},4662:(e,s,a)=>{"use strict";a.d(s,{SP:()=>o,dr:()=>d,mQ:()=>n,nU:()=>c});var l=a(7247),t=a(8964),i=a(3664),r=a(5008);let n=i.fC,d=t.forwardRef(({className:e,...s},a)=>l.jsx(i.aV,{ref:a,className:(0,r.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));d.displayName=i.aV.displayName;let o=t.forwardRef(({className:e,...s},a)=>l.jsx(i.xz,{ref:a,className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));o.displayName=i.xz.displayName;let c=t.forwardRef(({className:e,...s},a)=>l.jsx(i.VY,{ref:a,className:(0,r.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));c.displayName=i.VY.displayName},3667:(e,s,a)=>{"use strict";function l(){return null}a.r(s),a.d(s,{default:()=>l})},1052:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>l});let l=(0,a(5347).createProxy)(String.raw`E:\cloud-vault\app\files\page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),l=s.X(0,[379,376,389,407,664,613,809,296,840,156],()=>a(795));module.exports=l})();