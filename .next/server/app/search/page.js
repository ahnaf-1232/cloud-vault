(()=>{var e={};e.id=797,e.ids=[797],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},1577:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>o,routeModule:()=>p,tree:()=>c}),s(5250),s(4389),s(546);var t=s(170),l=s(5002),r=s(3876),i=s.n(r),n=s(6299),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(a,d);let c=["",{children:["search",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5250)),"E:\\cloud-vault\\app\\search\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(s.bind(s,9808)),"E:\\cloud-vault\\app\\search\\loading.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,4389)),"E:\\cloud-vault\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,546)),"E:\\cloud-vault\\app\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["E:\\cloud-vault\\app\\search\\page.tsx"],u="/search/page",h={require:s,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/search/page",pathname:"/search",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4096:(e,a,s)=>{Promise.resolve().then(s.bind(s,8443))},8443:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>g});var t=s(7247),l=s(8964),r=s(8649),i=s(458),n=s(7589),d=s(8053),c=s(6991),o=s(4538),u=s(7757),h=s(4049),p=s(6013),x=s(7641),m=s(9256);let f=(0,s(6323).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var v=s(7013),j=s(594),y=s(906);function g(){let[e,a]=(0,l.useState)([]),[s,g]=(0,l.useState)(!1),[b,N]=(0,l.useState)(!1),{toast:w}=(0,y.pm)(),[k,R]=(0,l.useState)({query:"",fileTypes:[],dateRange:"",sizeRange:"",sortBy:"uploadedAt",sortOrder:"desc"}),P=async()=>{try{g(!0),N(!0);let e=await j.b.searchFiles({query:k.query,fileTypes:k.fileTypes,dateRange:k.dateRange,sizeRange:k.sizeRange,sortBy:k.sortBy,sortOrder:k.sortOrder});console.log(e.files),a(e.files||[])}catch(e){w({title:"Error",description:"Failed to search files. Please try again.",variant:"destructive"})}finally{g(!1)}},E=(e,a)=>{R(s=>({...s,fileTypes:a?[...s.fileTypes,e]:s.fileTypes.filter(a=>a!==e)}))},_=async s=>{try{await j.b.deleteFile(s),a(e.filter(e=>e._id!==s)),w({title:"Success",description:"File deleted successfully."})}catch(e){w({title:"Error",description:"Failed to delete file. Please try again.",variant:"destructive"})}},S=async(e,a)=>{try{let s=await j.b.downloadFile(e),t=window.URL.createObjectURL(s),l=document.createElement("a");l.href=t,l.download=a,document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(t),document.body.removeChild(l)}catch(e){w({title:"Error",description:"Failed to download file. Please try again.",variant:"destructive"})}},C=[k.fileTypes.length>0,""!==k.dateRange,""!==k.sizeRange].filter(Boolean).length;return t.jsx(r.i,{children:(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[t.jsx(i.w,{}),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Search & Filter"}),t.jsx("p",{className:"text-muted-foreground",children:"Find your files quickly with advanced search and filtering"})]}),(0,t.jsxs)("div",{className:"grid gap-6 lg:grid-cols-4",children:[(0,t.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,t.jsxs)(u.Zb,{children:[t.jsx(u.Ol,{children:t.jsx(u.ll,{className:"text-lg",children:"Search"})}),(0,t.jsxs)(u.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(o._,{htmlFor:"search",children:"File name"}),(0,t.jsxs)("div",{className:"relative",children:[t.jsx(m.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx(c.I,{id:"search",placeholder:"Search files...",value:k.query,onChange:e=>R(a=>({...a,query:e.target.value})),className:"pl-10",onKeyPress:e=>"Enter"===e.key&&P()})]})]}),(0,t.jsxs)(d.z,{onClick:P,className:"w-full",disabled:s,children:[t.jsx(m.Z,{className:"mr-2 h-4 w-4"}),"Search"]})]})]}),(0,t.jsxs)(u.Zb,{children:[t.jsx(u.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(u.ll,{className:"text-lg flex items-center gap-2",children:[t.jsx(f,{className:"h-4 w-4"}),"Filters",C>0&&t.jsx("span",{className:"bg-primary text-primary-foreground text-xs px-2 py-1 rounded-full",children:C})]}),C>0&&t.jsx(d.z,{variant:"ghost",size:"sm",onClick:()=>{R({query:"",fileTypes:[],dateRange:"",sizeRange:"",sortBy:"uploadedAt",sortOrder:"desc"}),a([]),N(!1)},children:t.jsx(v.Z,{className:"h-4 w-4"})})]})}),(0,t.jsxs)(u.aY,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx(o._,{className:"text-sm font-medium",children:"File Types"}),t.jsx("div",{className:"space-y-2",children:[{value:"image",label:"Images"},{value:"video",label:"Videos"},{value:"audio",label:"Audio"},{value:"document",label:"Documents"},{value:"pdf",label:"PDF"},{value:"text",label:"Text"},{value:"archive",label:"Archives"}].map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(p.X,{id:e.value,checked:k.fileTypes.includes(e.value),onCheckedChange:a=>E(e.value,a)}),t.jsx(o._,{htmlFor:e.value,className:"text-sm",children:e.label})]},e.value))})]}),t.jsx(x.Z,{}),(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx(o._,{className:"text-sm font-medium",children:"Date Range"}),(0,t.jsxs)(h.Ph,{value:k.dateRange,onValueChange:e=>{R(a=>({...a,dateRange:"all"===e?"":e}))},children:[t.jsx(h.i4,{children:t.jsx(h.ki,{placeholder:"Select date range"})}),(0,t.jsxs)(h.Bw,{children:[t.jsx(h.Ql,{value:"all",children:"All"}),[{value:"today",label:"Today"},{value:"week",label:"This Week"},{value:"month",label:"This Month"},{value:"year",label:"This Year"}].map(e=>t.jsx(h.Ql,{value:e.value,children:e.label},e.value))]})]})]}),t.jsx(x.Z,{}),(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx(o._,{className:"text-sm font-medium",children:"File Size"}),(0,t.jsxs)(h.Ph,{value:k.sizeRange,onValueChange:e=>R(a=>({...a,sizeRange:e})),children:[t.jsx(h.i4,{children:t.jsx(h.ki,{placeholder:"Select size range"})}),t.jsx(h.Bw,{children:[{value:"small",label:"< 1 MB"},{value:"medium",label:"1 MB - 10 MB"},{value:"large",label:"10 MB - 100 MB"},{value:"xlarge",label:"> 100 MB"}].map(e=>t.jsx(h.Ql,{value:e.value,children:e.label},e.value))})]})]}),t.jsx(x.Z,{}),(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx(o._,{className:"text-sm font-medium",children:"Sort By"}),(0,t.jsxs)(h.Ph,{value:k.sortBy,onValueChange:e=>R(a=>({...a,sortBy:e})),children:[t.jsx(h.i4,{children:t.jsx(h.ki,{})}),(0,t.jsxs)(h.Bw,{children:[t.jsx(h.Ql,{value:"name",children:"Name"}),t.jsx(h.Ql,{value:"size",children:"Size"}),t.jsx(h.Ql,{value:"uploadedAt",children:"Date"}),t.jsx(h.Ql,{value:"type",children:"Type"})]})]}),(0,t.jsxs)(h.Ph,{value:k.sortOrder,onValueChange:e=>R(a=>({...a,sortOrder:e})),children:[t.jsx(h.i4,{children:t.jsx(h.ki,{})}),(0,t.jsxs)(h.Bw,{children:[t.jsx(h.Ql,{value:"asc",children:"Ascending"}),t.jsx(h.Ql,{value:"desc",children:"Descending"})]})]})]})]})]})]}),t.jsx("div",{className:"lg:col-span-3",children:(0,t.jsxs)(u.Zb,{children:[(0,t.jsxs)(u.Ol,{children:[(0,t.jsxs)(u.ll,{children:["Search Results",b&&(0,t.jsxs)("span",{className:"text-base font-normal text-muted-foreground ml-2",children:["(",e.length," files found)"]})]}),!b&&t.jsx(u.SZ,{children:"Use the search and filters to find your files"})]}),t.jsx(u.aY,{children:b?t.jsx(n.$,{files:e,loading:s,onDelete:_,onDownload:S}):(0,t.jsxs)("div",{className:"text-center py-12",children:[t.jsx(m.Z,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),t.jsx("h3",{className:"text-lg font-medium mb-2",children:"Start searching"}),t.jsx("p",{className:"text-muted-foreground",children:"Enter a search term or apply filters to find your files"})]})})]})})]})]})]})})}},6013:(e,a,s)=>{"use strict";s.d(a,{X:()=>R});var t=s(7247),l=s(8964),r=s(3191),i=s(732),n=s(319),d=s(8469),c=s(255),o=s(7264),u=s(2251),h="Checkbox",[p,x]=(0,i.b)(h),[m,f]=p(h),v=l.forwardRef((e,a)=>{let{__scopeCheckbox:s,name:i,checked:c,defaultChecked:o,required:h,disabled:p,value:x="on",onCheckedChange:f,form:v,...j}=e,[y,w]=l.useState(null),k=(0,r.e)(a,e=>w(e)),R=l.useRef(!1),P=!y||v||!!y.closest("form"),[E=!1,_]=(0,d.T)({prop:c,defaultProp:o,onChange:f}),S=l.useRef(E);return l.useEffect(()=>{let e=y?.form;if(e){let a=()=>_(S.current);return e.addEventListener("reset",a),()=>e.removeEventListener("reset",a)}},[y,_]),(0,t.jsxs)(m,{scope:s,state:E,disabled:p,children:[(0,t.jsx)(u.WV.button,{type:"button",role:"checkbox","aria-checked":b(E)?"mixed":E,"aria-required":h,"data-state":N(E),"data-disabled":p?"":void 0,disabled:p,value:x,...j,ref:k,onKeyDown:(0,n.M)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,n.M)(e.onClick,e=>{_(e=>!!b(e)||!e),P&&(R.current=e.isPropagationStopped(),R.current||e.stopPropagation())})}),P&&(0,t.jsx)(g,{control:y,bubbles:!R.current,name:i,value:x,checked:E,required:h,disabled:p,form:v,style:{transform:"translateX(-100%)"},defaultChecked:!b(o)&&o})]})});v.displayName=h;var j="CheckboxIndicator",y=l.forwardRef((e,a)=>{let{__scopeCheckbox:s,forceMount:l,...r}=e,i=f(j,s);return(0,t.jsx)(o.z,{present:l||b(i.state)||!0===i.state,children:(0,t.jsx)(u.WV.span,{"data-state":N(i.state),"data-disabled":i.disabled?"":void 0,...r,ref:a,style:{pointerEvents:"none",...e.style}})})});y.displayName=j;var g=e=>{let{control:a,checked:s,bubbles:r=!0,defaultChecked:i,...n}=e,d=l.useRef(null),o=function(e){let a=l.useRef({value:e,previous:e});return l.useMemo(()=>(a.current.value!==e&&(a.current.previous=a.current.value,a.current.value=e),a.current.previous),[e])}(s),u=(0,c.t)(a);l.useEffect(()=>{let e=d.current,a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==s&&a){let t=new Event("click",{bubbles:r});e.indeterminate=b(s),a.call(e,!b(s)&&s),e.dispatchEvent(t)}},[o,s,r]);let h=l.useRef(!b(s)&&s);return(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??h.current,...n,tabIndex:-1,ref:d,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function b(e){return"indeterminate"===e}function N(e){return b(e)?"indeterminate":e?"checked":"unchecked"}var w=s(8799),k=s(5008);let R=l.forwardRef(({className:e,...a},s)=>t.jsx(v,{ref:s,className:(0,k.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...a,children:t.jsx(y,{className:(0,k.cn)("flex items-center justify-center text-current"),children:t.jsx(w.Z,{className:"h-4 w-4"})})}));R.displayName=v.displayName},4538:(e,a,s)=>{"use strict";s.d(a,{_:()=>o});var t=s(7247),l=s(8964),r=s(2251),i=l.forwardRef((e,a)=>(0,t.jsx)(r.WV.label,{...e,ref:a,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));i.displayName="Label";var n=s(7972),d=s(5008);let c=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=l.forwardRef(({className:e,...a},s)=>t.jsx(i,{ref:s,className:(0,d.cn)(c(),e),...a}));o.displayName=i.displayName},7641:(e,a,s)=>{"use strict";s.d(a,{Z:()=>o});var t=s(7247),l=s(8964),r=s(2251),i="horizontal",n=["horizontal","vertical"],d=l.forwardRef((e,a)=>{let{decorative:s,orientation:l=i,...d}=e,c=n.includes(l)?l:i;return(0,t.jsx)(r.WV.div,{"data-orientation":c,...s?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...d,ref:a})});d.displayName="Separator";var c=s(5008);let o=l.forwardRef(({className:e,orientation:a="horizontal",decorative:s=!0,...l},r)=>t.jsx(d,{ref:r,decorative:s,orientation:a,className:(0,c.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",e),...l}));o.displayName=d.displayName},9808:(e,a,s)=>{"use strict";function t(){return null}s.r(a),s.d(a,{default:()=>t})},5250:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(5347).createProxy)(String.raw`E:\cloud-vault\app\search\page.tsx#default`)}};var a=require("../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[379,376,389,407,613,296,840,156],()=>s(1577));module.exports=t})();