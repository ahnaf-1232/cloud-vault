(()=>{var e={};e.id=702,e.ids=[702],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},4938:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>o}),s(3063),s(4389),s(546);var a=s(170),r=s(5002),l=s(3876),i=s.n(l),n=s(6299),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let o=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3063)),"E:\\cloud-vault\\app\\dashboard\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,4389)),"E:\\cloud-vault\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,546)),"E:\\cloud-vault\\app\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["E:\\cloud-vault\\app\\dashboard\\page.tsx"],p="/dashboard/page",h={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},3557:(e,t,s)=>{Promise.resolve().then(s.bind(s,1385))},1385:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(7247),r=s(8964),l=s(8649),i=s(458),n=s(7757),d=s(8053),o=s(4367),c=s(8557),p=s(1860),h=s(9205),x=s(8190),m=s(9964);let u=(0,s(6323).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var f=s(9906);let j=e=>e<1024?`${e} bytes`:e<1048576?`${(e/1024).toFixed(2)} KB`:e<1073741824?`${(e/1024/1024).toFixed(2)} MB`:e<1099511627776?`${(e/1024/1024/1024).toFixed(2)} GB`:`${(e/1024/1024/1024/1024).toFixed(2)} TB`;function g(){let{user:e}=(0,p.a)(),[t,s]=(0,r.useState)(null),[g,y]=(0,r.useState)(null),[v,b]=(0,r.useState)(null),[w,N]=(0,r.useState)([]),[F,k]=(0,r.useState)(!1),S=e=>(e/1073741824).toFixed(2);return a.jsx(l.i,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[a.jsx(i.w,{}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold",children:["Welcome back, ",e?.name,"!"]}),a.jsx("p",{className:"text-muted-foreground",children:"Here's an overview of your storage"})]}),(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4 mb-8",children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(n.ll,{className:"text-sm font-medium",children:"Storage Used"}),a.jsx(h.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(n.aY,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[t?S(t.storageUsed):0," GB"]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["of ",t?S(t.storageLimit):0," GB total"]}),a.jsx(o.E,{value:t?t.storageUsed/t.storageLimit*100:0,className:"mt-2"})]})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(n.ll,{className:"text-sm font-medium",children:"Total Files"}),a.jsx(x.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(n.aY,{children:[a.jsx("div",{className:"text-2xl font-bold",children:g?g.fileTypes.length:0}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"+3 from last week"})]})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(n.ll,{className:"text-sm font-medium",children:"Recent Uploads"}),a.jsx(m.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(n.aY,{children:[a.jsx("div",{className:"text-2xl font-bold",children:w.length}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"in the last 7 days"})]})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(n.ll,{className:"text-sm font-medium",children:"Last Activity"}),a.jsx(u,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(n.aY,{children:[a.jsx("div",{className:"text-2xl font-bold",children:v&&v.activities.length>0?new Date(v.activities[0].timestamp).toLocaleString():"No activity"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"last activity timestamp"})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{children:"Quick Upload"}),a.jsx(n.SZ,{children:"Drag and drop files or click to browse"})]}),a.jsx(n.aY,{children:a.jsx(c.p,{})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx(n.ll,{children:"Recent Files"}),a.jsx(n.SZ,{children:"Your latest uploads"})]}),a.jsx(d.z,{variant:"outline",size:"sm",asChild:!0,children:a.jsx(f.default,{href:"/files",children:"View All"})})]}),a.jsx(n.aY,{children:a.jsx("div",{className:"space-y-4",children:w.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium",children:e.fileName}),a.jsx("p",{className:"text-sm text-muted-foreground",children:j(e.fileSize)})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(e.timestamp).toLocaleString()})]},e._id))})})]})]})]})]})})}},8557:(e,t,s)=>{"use strict";s.d(t,{p:()=>x});var a=s(7247),r=s(8964),l=s(1290),i=s(8053),n=s(4367),d=s(9964),o=s(9055),c=s(7013),p=s(906),h=s(594);function x({onUploadComplete:e}={}){let[t,s]=(0,r.useState)([]),[x,m]=(0,r.useState)(!1),[u,f]=(0,r.useState)(0),{toast:j}=(0,p.pm)(),g=(0,r.useCallback)(e=>{s(e.map(e=>Object.assign(e,{preview:URL.createObjectURL(e)})))},[]),{getRootProps:y,getInputProps:v,isDragActive:b}=(0,l.uI)({onDrop:g,multiple:!0}),w=e=>{s(t.filter(t=>t!==e)),e.preview&&URL.revokeObjectURL(e.preview)},N=async()=>{if(0!==t.length){m(!0),f(0);try{for(let e=0;e<t.length;e++)await h.b.uploadFile(t[e]),f((e+1)/t.length*100);j({title:"Upload Successful",description:`${t.length} file(s) uploaded successfully.`}),e&&e(),t.forEach(e=>{e.preview&&URL.revokeObjectURL(e.preview)}),s([])}catch(e){j({title:"Upload Failed",description:"Failed to upload files. Please try again.",variant:"destructive"})}finally{m(!1),f(0)}}},F=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return Number.parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{...y(),className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors ${b?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}`,children:[a.jsx("input",{...v()}),a.jsx(d.Z,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),b?a.jsx("p",{children:"Drop the files here..."}):(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-lg font-medium",children:"Drag & drop files here"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"or click to browse"})]})]}),t.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium",children:"Selected Files:"}),t.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(o.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:e.name}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",F(e.size),")"]})]}),a.jsx(i.z,{variant:"ghost",size:"sm",onClick:()=>w(e),disabled:x,children:a.jsx(c.Z,{className:"h-4 w-4"})})]},t))]}),x&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Uploading..."}),(0,a.jsxs)("span",{children:[Math.round(u),"%"]})]}),a.jsx(n.E,{value:u})]}),t.length>0&&a.jsx(i.z,{onClick:N,disabled:x,className:"w-full",children:x?"Uploading...":`Upload ${t.length} file(s)`})]})}},4367:(e,t,s)=>{"use strict";s.d(t,{E:()=>n});var a=s(7247),r=s(8964),l=s(9768),i=s(5008);let n=r.forwardRef(({className:e,value:t,...s},r)=>a.jsx(l.fC,{ref:r,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...s,children:a.jsx(l.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));n.displayName=l.fC.displayName},9055:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6323).Z)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]])},8190:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6323).Z)("Files",[["path",{d:"M20 7h-3a2 2 0 0 1-2-2V2",key:"x099mo"}],["path",{d:"M9 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h7l4 4v10a2 2 0 0 1-2 2Z",key:"18t6ie"}],["path",{d:"M3 7.6v12.8A1.6 1.6 0 0 0 4.6 22h9.8",key:"1nja0z"}]])},9205:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6323).Z)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]])},594:(e,t,s)=>{"use strict";s.d(t,{b:()=>l});let a="http://52.66.24.57:3000/api",r=()=>{let e=localStorage.getItem("token");return{Authorization:`Bearer ${e}`}},l={async uploadFile(e){let t=new FormData;t.append("file",e);let s=await fetch(`${a}/files/upload`,{method:"POST",headers:r(),body:t});if(console.log(s.status),!s.ok)throw Error((await s.json().catch(()=>({message:"File upload failed"}))).message||"File upload failed");return s.json()},async getFiles(e,t){let s=new URLSearchParams;e&&s.append("query",e),t?.sortBy&&s.append("sortBy",t.sortBy),t?.sortOrder&&s.append("sortOrder",t.sortOrder),t?.fileTypes&&t.fileTypes.length>0&&s.append("fileTypes",t.fileTypes.join(",")),t?.dateRange&&s.append("dateRange",t.dateRange),t?.sizeRange&&s.append("sizeRange",t.sizeRange),t?.page&&s.append("page",t.page.toString()),t?.limit&&s.append("limit",t.limit.toString());let l=await fetch(`${a}/files?${s}`,{headers:r()});if(!l.ok)throw Error("Failed to fetch files");return l.json()},async getFile(e){let t=await fetch(`${a}/files/${e}`,{headers:r()});if(!t.ok){if(404===t.status)throw Error("File not found");throw Error("Failed to fetch file")}return t.json()},async deleteFile(e){let t=await fetch(`${a}/files/${e}`,{method:"DELETE",headers:r()});if(!t.ok)throw Error((await t.json().catch(()=>({message:"Failed to delete file"}))).message||"Failed to delete file");return t.json()},async downloadFile(e){let t=await fetch(`${a}/files/${e}/download`,{headers:r()});if(!t.ok)throw Error("Failed to download file");return t.blob()},async updateFile(e,t){let s=await fetch(`${a}/files/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",...r()},body:JSON.stringify(t)});if(!s.ok)throw Error("Failed to update file");return s.json()},async shareFile(e,t={}){let s=await fetch(`${a}/files/${e}/share`,{method:"POST",headers:{"Content-Type":"application/json",...r()},body:JSON.stringify(t)});if(!s.ok)throw Error("Failed to share file");return s.json()},async searchFiles(e){let t=new URLSearchParams;e.query&&t.append("q",e.query),e.fileTypes&&e.fileTypes.length>0&&t.append("fileTypes",e.fileTypes.join(",")),e.dateRange&&t.append("dateRange",e.dateRange),e.sizeRange&&t.append("sizeRange",e.sizeRange),e.sortBy&&t.append("sortBy",e.sortBy),e.sortOrder&&t.append("sortOrder",e.sortOrder),e.page&&t.append("page",e.page.toString()),e.limit&&t.append("limit",e.limit.toString());let s=await fetch(`${a}/files/search/user?${t}`,{headers:r()});if(!s.ok)throw Error("Failed to search files");return s.json()},async getFilterOptions(){let e=await fetch(`${a}/files/filters`,{headers:r()});if(!e.ok)throw Error("Failed to fetch filter options");return e.json()}}},3063:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(5347).createProxy)(String.raw`E:\cloud-vault\app\dashboard\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[379,376,389,809,296,840],()=>s(4938));module.exports=a})();