(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{577:function(e,s,a){Promise.resolve().then(a.bind(a,5929))},5929:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return g}});var l=a(7437),t=a(2265),r=a(5476),n=a(918),i=a(3752),c=a(2869),d=a(5186),o=a(6815),u=a(6070),h=a(3647),f=a(1800),x=a(6512),m=a(3247);let p=(0,a(9205).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var v=a(2489),j=a(9737),y=a(5153);function g(){let[e,s]=(0,t.useState)([]),[a,g]=(0,t.useState)(!1),[b,N]=(0,t.useState)(!1),{toast:w}=(0,y.pm)(),[k,R]=(0,t.useState)({query:"",fileTypes:[],dateRange:"",sizeRange:"",sortBy:"uploadedAt",sortOrder:"desc"}),C=async()=>{try{g(!0),N(!0);let e=await j.b.searchFiles({query:k.query,fileTypes:k.fileTypes,dateRange:k.dateRange,sizeRange:k.sizeRange,sortBy:k.sortBy,sortOrder:k.sortOrder});console.log(e.files),s(e.files||[])}catch(e){w({title:"Error",description:"Failed to search files. Please try again.",variant:"destructive"})}finally{g(!1)}},z=(e,s)=>{R(a=>({...a,fileTypes:s?[...a.fileTypes,e]:a.fileTypes.filter(s=>s!==e)}))},S=async a=>{try{await j.b.deleteFile(a),s(e.filter(e=>e._id!==a)),w({title:"Success",description:"File deleted successfully."})}catch(e){w({title:"Error",description:"Failed to delete file. Please try again.",variant:"destructive"})}},E=async(e,s)=>{try{let a=await j.b.downloadFile(e),l=window.URL.createObjectURL(a),t=document.createElement("a");t.href=l,t.download=s,document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(l),document.body.removeChild(t)}catch(e){w({title:"Error",description:"Failed to download file. Please try again.",variant:"destructive"})}},B=[k.fileTypes.length>0,""!==k.dateRange,""!==k.sizeRange].filter(Boolean).length;return(0,l.jsx)(r.i,{children:(0,l.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,l.jsx)(n.w,{}),(0,l.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Search & Filter"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"Find your files quickly with advanced search and filtering"})]}),(0,l.jsxs)("div",{className:"grid gap-6 lg:grid-cols-4",children:[(0,l.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,l.jsxs)(u.Zb,{children:[(0,l.jsx)(u.Ol,{children:(0,l.jsx)(u.ll,{className:"text-lg",children:"Search"})}),(0,l.jsxs)(u.aY,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(o._,{htmlFor:"search",children:"File name"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(m.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,l.jsx)(d.I,{id:"search",placeholder:"Search files...",value:k.query,onChange:e=>R(s=>({...s,query:e.target.value})),className:"pl-10",onKeyPress:e=>"Enter"===e.key&&C()})]})]}),(0,l.jsxs)(c.z,{onClick:C,className:"w-full",disabled:a,children:[(0,l.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"Search"]})]})]}),(0,l.jsxs)(u.Zb,{children:[(0,l.jsx)(u.Ol,{children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)(u.ll,{className:"text-lg flex items-center gap-2",children:[(0,l.jsx)(p,{className:"h-4 w-4"}),"Filters",B>0&&(0,l.jsx)("span",{className:"bg-primary text-primary-foreground text-xs px-2 py-1 rounded-full",children:B})]}),B>0&&(0,l.jsx)(c.z,{variant:"ghost",size:"sm",onClick:()=>{R({query:"",fileTypes:[],dateRange:"",sizeRange:"",sortBy:"uploadedAt",sortOrder:"desc"}),s([]),N(!1)},children:(0,l.jsx)(v.Z,{className:"h-4 w-4"})})]})}),(0,l.jsxs)(u.aY,{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)(o._,{className:"text-sm font-medium",children:"File Types"}),(0,l.jsx)("div",{className:"space-y-2",children:[{value:"image",label:"Images"},{value:"video",label:"Videos"},{value:"audio",label:"Audio"},{value:"document",label:"Documents"},{value:"pdf",label:"PDF"},{value:"text",label:"Text"},{value:"archive",label:"Archives"}].map(e=>(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(f.X,{id:e.value,checked:k.fileTypes.includes(e.value),onCheckedChange:s=>z(e.value,s)}),(0,l.jsx)(o._,{htmlFor:e.value,className:"text-sm",children:e.label})]},e.value))})]}),(0,l.jsx)(x.Z,{}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)(o._,{className:"text-sm font-medium",children:"Date Range"}),(0,l.jsxs)(h.Ph,{value:k.dateRange,onValueChange:e=>{R(s=>({...s,dateRange:"all"===e?"":e}))},children:[(0,l.jsx)(h.i4,{children:(0,l.jsx)(h.ki,{placeholder:"Select date range"})}),(0,l.jsxs)(h.Bw,{children:[(0,l.jsx)(h.Ql,{value:"all",children:"All"}),[{value:"today",label:"Today"},{value:"week",label:"This Week"},{value:"month",label:"This Month"},{value:"year",label:"This Year"}].map(e=>(0,l.jsx)(h.Ql,{value:e.value,children:e.label},e.value))]})]})]}),(0,l.jsx)(x.Z,{}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)(o._,{className:"text-sm font-medium",children:"File Size"}),(0,l.jsxs)(h.Ph,{value:k.sizeRange,onValueChange:e=>R(s=>({...s,sizeRange:e})),children:[(0,l.jsx)(h.i4,{children:(0,l.jsx)(h.ki,{placeholder:"Select size range"})}),(0,l.jsx)(h.Bw,{children:[{value:"small",label:"< 1 MB"},{value:"medium",label:"1 MB - 10 MB"},{value:"large",label:"10 MB - 100 MB"},{value:"xlarge",label:"> 100 MB"}].map(e=>(0,l.jsx)(h.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,l.jsx)(x.Z,{}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)(o._,{className:"text-sm font-medium",children:"Sort By"}),(0,l.jsxs)(h.Ph,{value:k.sortBy,onValueChange:e=>R(s=>({...s,sortBy:e})),children:[(0,l.jsx)(h.i4,{children:(0,l.jsx)(h.ki,{})}),(0,l.jsxs)(h.Bw,{children:[(0,l.jsx)(h.Ql,{value:"name",children:"Name"}),(0,l.jsx)(h.Ql,{value:"size",children:"Size"}),(0,l.jsx)(h.Ql,{value:"uploadedAt",children:"Date"}),(0,l.jsx)(h.Ql,{value:"type",children:"Type"})]})]}),(0,l.jsxs)(h.Ph,{value:k.sortOrder,onValueChange:e=>R(s=>({...s,sortOrder:e})),children:[(0,l.jsx)(h.i4,{children:(0,l.jsx)(h.ki,{})}),(0,l.jsxs)(h.Bw,{children:[(0,l.jsx)(h.Ql,{value:"asc",children:"Ascending"}),(0,l.jsx)(h.Ql,{value:"desc",children:"Descending"})]})]})]})]})]})]}),(0,l.jsx)("div",{className:"lg:col-span-3",children:(0,l.jsxs)(u.Zb,{children:[(0,l.jsxs)(u.Ol,{children:[(0,l.jsxs)(u.ll,{children:["Search Results",b&&(0,l.jsxs)("span",{className:"text-base font-normal text-muted-foreground ml-2",children:["(",e.length," files found)"]})]}),!b&&(0,l.jsx)(u.SZ,{children:"Use the search and filters to find your files"})]}),(0,l.jsx)(u.aY,{children:b?(0,l.jsx)(i.$,{files:e,loading:a,onDelete:S,onDownload:E}):(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)(m.Z,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),(0,l.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Start searching"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"Enter a search term or apply filters to find your files"})]})})]})})]})]})]})})}},1800:function(e,s,a){"use strict";a.d(s,{X:function(){return c}});var l=a(7437),t=a(2265),r=a(1027),n=a(401),i=a(4508);let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(r.fC,{ref:s,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...t,children:(0,l.jsx)(r.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,l.jsx)(n.Z,{className:"h-4 w-4"})})})});c.displayName=r.fC.displayName},6815:function(e,s,a){"use strict";a.d(s,{_:function(){return d}});var l=a(7437),t=a(2265),r=a(6394),n=a(535),i=a(4508);let c=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(r.f,{ref:s,className:(0,i.cn)(c(),a),...t})});d.displayName=r.f.displayName},6512:function(e,s,a){"use strict";a.d(s,{Z:function(){return i}});var l=a(7437),t=a(2265),r=a(5156),n=a(4508);let i=t.forwardRef((e,s)=>{let{className:a,orientation:t="horizontal",decorative:i=!0,...c}=e;return(0,l.jsx)(r.f,{ref:s,decorative:i,orientation:t,className:(0,n.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",a),...c})});i.displayName=r.f.displayName},1027:function(e,s,a){"use strict";a.d(s,{z$:function(){return k},fC:function(){return w}});var l=a(2265),t=a(8575),r=a(3966),n=a(6741),i=a(886),c=a(420),d=a(1599),o=a(6840),u=a(7437),h="Checkbox",[f,x]=(0,r.b)(h),[m,p]=f(h),v=l.forwardRef((e,s)=>{let{__scopeCheckbox:a,name:r,checked:c,defaultChecked:d,required:h,disabled:f,value:x="on",onCheckedChange:p,form:v,...j}=e,[y,w]=l.useState(null),k=(0,t.e)(s,e=>w(e)),R=l.useRef(!1),C=!y||v||!!y.closest("form"),[z=!1,S]=(0,i.T)({prop:c,defaultProp:d,onChange:p}),E=l.useRef(z);return l.useEffect(()=>{let e=null==y?void 0:y.form;if(e){let s=()=>S(E.current);return e.addEventListener("reset",s),()=>e.removeEventListener("reset",s)}},[y,S]),(0,u.jsxs)(m,{scope:a,state:z,disabled:f,children:[(0,u.jsx)(o.WV.button,{type:"button",role:"checkbox","aria-checked":b(z)?"mixed":z,"aria-required":h,"data-state":N(z),"data-disabled":f?"":void 0,disabled:f,value:x,...j,ref:k,onKeyDown:(0,n.M)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,n.M)(e.onClick,e=>{S(e=>!!b(e)||!e),C&&(R.current=e.isPropagationStopped(),R.current||e.stopPropagation())})}),C&&(0,u.jsx)(g,{control:y,bubbles:!R.current,name:r,value:x,checked:z,required:h,disabled:f,form:v,style:{transform:"translateX(-100%)"},defaultChecked:!b(d)&&d})]})});v.displayName=h;var j="CheckboxIndicator",y=l.forwardRef((e,s)=>{let{__scopeCheckbox:a,forceMount:l,...t}=e,r=p(j,a);return(0,u.jsx)(d.z,{present:l||b(r.state)||!0===r.state,children:(0,u.jsx)(o.WV.span,{"data-state":N(r.state),"data-disabled":r.disabled?"":void 0,...t,ref:s,style:{pointerEvents:"none",...e.style}})})});y.displayName=j;var g=e=>{let{control:s,checked:a,bubbles:t=!0,defaultChecked:r,...n}=e,i=l.useRef(null),d=function(e){let s=l.useRef({value:e,previous:e});return l.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}(a),o=(0,c.t)(s);l.useEffect(()=>{let e=i.current,s=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==a&&s){let l=new Event("click",{bubbles:t});e.indeterminate=b(a),s.call(e,!b(a)&&a),e.dispatchEvent(l)}},[d,a,t]);let h=l.useRef(!b(a)&&a);return(0,u.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:null!=r?r:h.current,...n,tabIndex:-1,ref:i,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function b(e){return"indeterminate"===e}function N(e){return b(e)?"indeterminate":e?"checked":"unchecked"}var w=v,k=y},6394:function(e,s,a){"use strict";a.d(s,{f:function(){return i}});var l=a(2265),t=a(6840),r=a(7437),n=l.forwardRef((e,s)=>(0,r.jsx)(t.WV.label,{...e,ref:s,onMouseDown:s=>{var a;s.target.closest("button, input, select, textarea")||(null===(a=e.onMouseDown)||void 0===a||a.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));n.displayName="Label";var i=n},5156:function(e,s,a){"use strict";a.d(s,{f:function(){return d}});var l=a(2265),t=a(6840),r=a(7437),n="horizontal",i=["horizontal","vertical"],c=l.forwardRef((e,s)=>{let{decorative:a,orientation:l=n,...c}=e,d=i.includes(l)?l:n;return(0,r.jsx)(t.WV.div,{"data-orientation":d,...a?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...c,ref:s})});c.displayName="Separator";var d=c}},function(e){e.O(0,[972,253,722,365,965,183,208,738,971,117,744],function(){return e(e.s=577)}),_N_E=e.O()}]);