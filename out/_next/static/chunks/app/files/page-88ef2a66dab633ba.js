(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[357],{1409:function(e,s,l){Promise.resolve().then(l.bind(l,2322))},2322:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return v}});var a=l(7437),t=l(2265),i=l(5476),r=l(918),n=l(2762),c=l(3752),d=l(2869),o=l(5186),u=l(6070),f=l(2339),x=l(3647),h=l(7689),m=l(3247),p=l(9737),j=l(5153);function v(){let[e,s]=(0,t.useState)([]),[l,v]=(0,t.useState)(!0),[g,b]=(0,t.useState)(""),[y,N]=(0,t.useState)("uploadedAt"),[w,U]=(0,t.useState)("desc"),[k,S]=(0,t.useState)("table"),{toast:C}=(0,j.pm)();(0,t.useEffect)(()=>{F()},[y,w]);let F=async()=>{try{v(!0);let e=await p.b.getFiles(g,{sortBy:y,sortOrder:w});s(e.files||[])}catch(e){C({title:"Error",description:"Failed to load files. Please try again.",variant:"destructive"})}finally{v(!1)}},R=()=>{F()},E=async l=>{try{await p.b.deleteFile(l),s(e.filter(e=>e._id!==l)),C({title:"Success",description:"File deleted successfully."})}catch(e){C({title:"Error",description:"Failed to delete file. Please try again.",variant:"destructive"})}},L=async(e,s)=>{try{let l=await p.b.downloadFile(e),a=window.URL.createObjectURL(l),t=document.createElement("a");t.href=a,t.download=s,document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(a),document.body.removeChild(t)}catch(e){C({title:"Error",description:"Failed to download file. Please try again.",variant:"destructive"})}},z=e.filter(e=>e.name.toLowerCase().includes(g.toLowerCase()));return(0,a.jsx)(i.i,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)(r.w,{}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"My Files"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage and organize your uploaded files"})]}),(0,a.jsxs)(f.mQ,{defaultValue:"files",className:"space-y-6",children:[(0,a.jsxs)(f.dr,{children:[(0,a.jsx)(f.SP,{value:"files",children:"All Files"}),(0,a.jsx)(f.SP,{value:"upload",children:"Upload Files"})]}),(0,a.jsx)(f.nU,{value:"upload",children:(0,a.jsxs)(u.Zb,{children:[(0,a.jsxs)(u.Ol,{children:[(0,a.jsxs)(u.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5"}),"Upload Files"]}),(0,a.jsx)(u.SZ,{children:"Upload new files to your CloudVault storage"})]}),(0,a.jsx)(u.aY,{children:(0,a.jsx)(n.p,{onUploadComplete:F})})]})}),(0,a.jsxs)(f.nU,{value:"files",className:"space-y-6",children:[(0,a.jsx)(u.Zb,{children:(0,a.jsx)(u.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 flex gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(m.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(o.I,{placeholder:"Search files...",value:g,onChange:e=>b(e.target.value),className:"pl-10",onKeyPress:e=>"Enter"===e.key&&R()})]}),(0,a.jsx)(d.z,{onClick:R,children:(0,a.jsx)(m.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(x.Ph,{value:y,onValueChange:N,children:[(0,a.jsx)(x.i4,{className:"w-[140px]",children:(0,a.jsx)(x.ki,{placeholder:"Sort by"})}),(0,a.jsxs)(x.Bw,{children:[(0,a.jsx)(x.Ql,{value:"name",children:"Name"}),(0,a.jsx)(x.Ql,{value:"size",children:"Size"}),(0,a.jsx)(x.Ql,{value:"uploadedAt",children:"Date"}),(0,a.jsx)(x.Ql,{value:"type",children:"Type"})]})]}),(0,a.jsxs)(x.Ph,{value:w,onValueChange:e=>U(e),children:[(0,a.jsx)(x.i4,{className:"w-[100px]",children:(0,a.jsx)(x.ki,{})}),(0,a.jsxs)(x.Bw,{children:[(0,a.jsx)(x.Ql,{value:"asc",children:"Asc"}),(0,a.jsx)(x.Ql,{value:"desc",children:"Desc"})]})]})]})]})})}),(0,a.jsxs)(u.Zb,{children:[(0,a.jsx)(u.Ol,{children:(0,a.jsxs)(u.ll,{children:["Files (",z.length,")"]})}),(0,a.jsx)(u.aY,{children:(0,a.jsx)(c.$,{files:z,loading:l,onDelete:E,onDownload:L})})]})]})]})]})]})})}},2762:function(e,s,l){"use strict";l.d(s,{p:function(){return x}});var a=l(7437),t=l(2265),i=l(5598),r=l(2869),n=l(2759),c=l(7689),d=l(9658),o=l(2489),u=l(5153),f=l(9737);function x(){let{onUploadComplete:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[s,l]=(0,t.useState)([]),[x,h]=(0,t.useState)(!1),[m,p]=(0,t.useState)(0),{toast:j}=(0,u.pm)(),v=(0,t.useCallback)(e=>{l(e.map(e=>Object.assign(e,{preview:URL.createObjectURL(e)})))},[]),{getRootProps:g,getInputProps:b,isDragActive:y}=(0,i.uI)({onDrop:v,multiple:!0}),N=e=>{l(s.filter(s=>s!==e)),e.preview&&URL.revokeObjectURL(e.preview)},w=async()=>{if(0!==s.length){h(!0),p(0);try{for(let e=0;e<s.length;e++)await f.b.uploadFile(s[e]),p((e+1)/s.length*100);j({title:"Upload Successful",description:"".concat(s.length," file(s) uploaded successfully.")}),e&&e(),s.forEach(e=>{e.preview&&URL.revokeObjectURL(e.preview)}),l([])}catch(e){j({title:"Upload Failed",description:"Failed to upload files. Please try again.",variant:"destructive"})}finally{h(!1),p(0)}}},U=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return Number.parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{...g(),className:"border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors ".concat(y?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"),children:[(0,a.jsx)("input",{...b()}),(0,a.jsx)(c.Z,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),y?(0,a.jsx)("p",{children:"Drop the files here..."}):(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg font-medium",children:"Drag & drop files here"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"or click to browse"})]})]}),s.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Selected Files:"}),s.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm",children:e.name}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",U(e.size),")"]})]}),(0,a.jsx)(r.z,{variant:"ghost",size:"sm",onClick:()=>N(e),disabled:x,children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})})]},s))]}),x&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Uploading..."}),(0,a.jsxs)("span",{children:[Math.round(m),"%"]})]}),(0,a.jsx)(n.E,{value:m})]}),s.length>0&&(0,a.jsx)(r.z,{onClick:w,disabled:x,className:"w-full",children:x?"Uploading...":"Upload ".concat(s.length," file(s)")})]})}},2759:function(e,s,l){"use strict";l.d(s,{E:function(){return n}});var a=l(7437),t=l(2265),i=l(610),r=l(4508);let n=t.forwardRef((e,s)=>{let{className:l,value:t,...n}=e;return(0,a.jsx)(i.fC,{ref:s,className:(0,r.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",l),...n,children:(0,a.jsx)(i.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(t||0),"%)")}})})});n.displayName=i.fC.displayName},2339:function(e,s,l){"use strict";l.d(s,{SP:function(){return d},dr:function(){return c},mQ:function(){return n},nU:function(){return o}});var a=l(7437),t=l(2265),i=l(200),r=l(4508);let n=i.fC,c=t.forwardRef((e,s)=>{let{className:l,...t}=e;return(0,a.jsx)(i.aV,{ref:s,className:(0,r.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",l),...t})});c.displayName=i.aV.displayName;let d=t.forwardRef((e,s)=>{let{className:l,...t}=e;return(0,a.jsx)(i.xz,{ref:s,className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",l),...t})});d.displayName=i.xz.displayName;let o=t.forwardRef((e,s)=>{let{className:l,...t}=e;return(0,a.jsx)(i.VY,{ref:s,className:(0,r.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",l),...t})});o.displayName=i.VY.displayName}},function(e){e.O(0,[972,253,722,365,965,200,183,269,208,738,971,117,744],function(){return e(e.s=1409)}),_N_E=e.O()}]);