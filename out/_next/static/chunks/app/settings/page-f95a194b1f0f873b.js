(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{9927:function(e,s,t){Promise.resolve().then(t.bind(t,7174))},7174:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return S}});var a=t(7437),r=t(2265),n=t(5476),i=t(918),l=t(7461),o=t(2869),c=t(5186),d=t(6815),u=t(6070),f=t(2339),m=t(147),h=t(4508);let x=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(m.fC,{className:(0,h.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...r,ref:s,children:(0,a.jsx)(m.bU,{className:(0,h.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});x.displayName=m.fC.displayName;var p=t(6512),g=t(7099),j=t(2369),w=t(1817),y=t(6337),N=t(8930),b=t(5153);let v="http://52.66.24.57:3000/api",P=()=>{let e=localStorage.getItem("token");return{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}},k={async getProfile(){let e=await fetch("".concat(v,"/users/me"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!e.ok)throw Error("Failed to fetch user profile");return e.json()},async updateProfile(e){let s=await fetch("".concat(v,"/users/me"),{method:"PUT",headers:P(),body:JSON.stringify(e)});if(!s.ok)throw Error((await s.json().catch(()=>({message:"Failed to update profile"}))).message||"Failed to update profile");return s.json()},async changePassword(e,s){let t=await fetch("".concat(v,"/users/change-password"),{method:"POST",headers:P(),body:JSON.stringify({currentPassword:e,newPassword:s})});if(!t.ok)throw Error((await t.json().catch(()=>({message:"Failed to change password"}))).message||"Failed to change password");return t.json()},async getSettings(){let e=await fetch("".concat(v,"/users/settings"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!e.ok)throw Error("Failed to fetch user settings");return e.json()},async updateSettings(e){let s=await fetch("".concat(v,"/users/settings"),{method:"PUT",headers:P(),body:JSON.stringify(e)});if(!s.ok)throw Error((await s.json().catch(()=>({message:"Failed to update settings"}))).message||"Failed to update settings");return s.json()},async deleteAccount(){let e=await fetch("".concat(v,"/users/me"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!e.ok)throw Error((await e.json().catch(()=>({message:"Failed to delete account"}))).message||"Failed to delete account");return e.json()},async getUserById(e){let s=await fetch("".concat(v,"/users/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!s.ok)throw Error("Failed to fetch user");return s.json()}};function S(){let{user:e,logout:s}=(0,l.a)(),{toast:t}=(0,b.pm)(),[m,h]=(0,r.useState)({name:(null==e?void 0:e.name)||"",email:(null==e?void 0:e.email)||""}),[v,P]=(0,r.useState)(!1),[S,C]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[F,E]=(0,r.useState)(!1),[Z,z]=(0,r.useState)(!1),[_,A]=(0,r.useState)(!0),[R,I]=(0,r.useState)(!1),U=async e=>{e.preventDefault(),P(!0);try{await k.updateProfile(m),t({title:"Success",description:"Profile updated successfully."})}catch(e){t({title:"Error",description:"Failed to update profile. Please try again.",variant:"destructive"})}finally{P(!1)}},D=async e=>{if(e.preventDefault(),S.newPassword!==S.confirmPassword){t({title:"Error",description:"New passwords do not match.",variant:"destructive"});return}if(S.newPassword.length<8){t({title:"Error",description:"Password must be at least 8 characters long.",variant:"destructive"});return}E(!0);try{await k.changePassword(S.currentPassword,S.newPassword),C({currentPassword:"",newPassword:"",confirmPassword:""}),t({title:"Success",description:"Password changed successfully."})}catch(e){t({title:"Error",description:"Failed to change password. Please check your current password.",variant:"destructive"})}finally{E(!1)}},O=async()=>{try{await k.deleteAccount(),t({title:"Account Deleted",description:"Your account has been permanently deleted."}),s()}catch(e){t({title:"Error",description:"Failed to delete account. Please try again.",variant:"destructive"})}},T=async(e,s)=>{try{await k.updateSettings({[e]:s}),t({title:"Success",description:"Settings updated successfully."})}catch(e){t({title:"Error",description:"Failed to update settings.",variant:"destructive"})}};return(0,a.jsx)(n.i,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)(i.w,{}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Settings"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage your account and application preferences"})]}),(0,a.jsxs)(f.mQ,{defaultValue:"profile",className:"space-y-6",children:[(0,a.jsxs)(f.dr,{className:"grid w-full grid-cols-4",children:[(0,a.jsx)(f.SP,{value:"profile",children:"Profile"}),(0,a.jsx)(f.SP,{value:"security",children:"Security"}),(0,a.jsx)(f.SP,{value:"preferences",children:"Preferences"}),(0,a.jsx)(f.SP,{value:"danger",children:"Danger Zone"})]}),(0,a.jsx)(f.nU,{value:"profile",children:(0,a.jsxs)(u.Zb,{children:[(0,a.jsxs)(u.Ol,{children:[(0,a.jsxs)(u.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5"}),"Profile Information"]}),(0,a.jsx)(u.SZ,{children:"Update your personal information and contact details"})]}),(0,a.jsx)(u.aY,{children:(0,a.jsxs)("form",{onSubmit:U,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"name",children:"Full Name"}),(0,a.jsx)(c.I,{id:"name",value:m.name,onChange:e=>h(s=>({...s,name:e.target.value})),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"email",children:"Email Address"}),(0,a.jsx)(c.I,{id:"email",type:"email",value:m.email,onChange:e=>h(s=>({...s,email:e.target.value})),required:!0})]})]}),(0,a.jsxs)(o.z,{type:"submit",disabled:v,children:[v&&(0,a.jsx)(w.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Profile"]})]})})]})}),(0,a.jsx)(f.nU,{value:"security",children:(0,a.jsxs)(u.Zb,{children:[(0,a.jsxs)(u.Ol,{children:[(0,a.jsxs)(u.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(y.Z,{className:"h-5 w-5"}),"Change Password"]}),(0,a.jsx)(u.SZ,{children:"Update your password to keep your account secure"})]}),(0,a.jsx)(u.aY,{children:(0,a.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"currentPassword",children:"Current Password"}),(0,a.jsx)(c.I,{id:"currentPassword",type:"password",value:S.currentPassword,onChange:e=>C(s=>({...s,currentPassword:e.target.value})),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"newPassword",children:"New Password"}),(0,a.jsx)(c.I,{id:"newPassword",type:"password",value:S.newPassword,onChange:e=>C(s=>({...s,newPassword:e.target.value})),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"confirmPassword",children:"Confirm New Password"}),(0,a.jsx)(c.I,{id:"confirmPassword",type:"password",value:S.confirmPassword,onChange:e=>C(s=>({...s,confirmPassword:e.target.value})),required:!0})]}),(0,a.jsxs)(o.z,{type:"submit",disabled:F,children:[F&&(0,a.jsx)(w.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Change Password"]})]})})]})}),(0,a.jsx)(f.nU,{value:"preferences",children:(0,a.jsxs)(u.Zb,{children:[(0,a.jsxs)(u.Ol,{children:[(0,a.jsx)(u.ll,{children:"Application Preferences"}),(0,a.jsx)(u.SZ,{children:"Customize your CloudVault experience"})]}),(0,a.jsxs)(u.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(d._,{className:"text-base",children:"Dark Mode"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Switch between light and dark themes"})]}),(0,a.jsx)(x,{checked:Z,onCheckedChange:e=>{z(e),T("darkMode",e)}})]}),(0,a.jsx)(p.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(d._,{className:"text-base",children:"Email Notifications"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Receive email notifications for file activities"})]}),(0,a.jsx)(x,{checked:_,onCheckedChange:e=>{A(e),T("emailNotifications",e)}})]}),(0,a.jsx)(p.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(d._,{className:"text-base",children:"Auto Backup"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Automatically backup files to secondary storage"})]}),(0,a.jsx)(x,{checked:R,onCheckedChange:e=>{I(e),T("autoBackup",e)}})]})]})]})}),(0,a.jsx)(f.nU,{value:"danger",children:(0,a.jsxs)(u.Zb,{className:"border-red-200",children:[(0,a.jsxs)(u.Ol,{children:[(0,a.jsxs)(u.ll,{className:"flex items-center gap-2 text-red-600",children:[(0,a.jsx)(N.Z,{className:"h-5 w-5"}),"Danger Zone"]}),(0,a.jsx)(u.SZ,{children:"Irreversible and destructive actions"})]}),(0,a.jsx)(u.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"p-4 border border-red-200 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-medium text-red-600 mb-2",children:"Delete Account"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Once you delete your account, there is no going back. This will permanently delete your account and all associated files."}),(0,a.jsxs)(g.aR,{children:[(0,a.jsx)(g.vW,{asChild:!0,children:(0,a.jsxs)(o.z,{variant:"destructive",children:[(0,a.jsx)(N.Z,{className:"mr-2 h-4 w-4"}),"Delete Account"]})}),(0,a.jsxs)(g._T,{children:[(0,a.jsxs)(g.fY,{children:[(0,a.jsx)(g.f$,{children:"Are you absolutely sure?"}),(0,a.jsx)(g.yT,{children:"This action cannot be undone. This will permanently delete your account and remove all your files from our servers."})]}),(0,a.jsxs)(g.xo,{children:[(0,a.jsx)(g.le,{children:"Cancel"}),(0,a.jsx)(g.OL,{onClick:O,className:"bg-red-600 hover:bg-red-700",children:"Yes, delete my account"})]})]})]})]})})})]})})]})]})]})})}},7099:function(e,s,t){"use strict";t.d(s,{OL:function(){return g},_T:function(){return f},aR:function(){return o},f$:function(){return x},fY:function(){return m},le:function(){return j},vW:function(){return c},xo:function(){return h},yT:function(){return p}});var a=t(7437),r=t(2265),n=t(394),i=t(4508),l=t(2869);let o=n.fC,c=n.xz,d=n.h_,u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.aV,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r,ref:s})});u.displayName=n.aV.displayName;let f=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(u,{}),(0,a.jsx)(n.VY,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r})]})});f.displayName=n.VY.displayName;let m=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...t})};m.displayName="AlertDialogHeader";let h=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};h.displayName="AlertDialogFooter";let x=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.Dx,{ref:s,className:(0,i.cn)("text-lg font-semibold",t),...r})});x.displayName=n.Dx.displayName;let p=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.dk,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...r})});p.displayName=n.dk.displayName;let g=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.aU,{ref:s,className:(0,i.cn)((0,l.d)(),t),...r})});g.displayName=n.aU.displayName;let j=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.$j,{ref:s,className:(0,i.cn)((0,l.d)({variant:"outline"}),"mt-2 sm:mt-0",t),...r})});j.displayName=n.$j.displayName},5186:function(e,s,t){"use strict";t.d(s,{I:function(){return i}});var a=t(7437),r=t(2265),n=t(4508);let i=r.forwardRef((e,s)=>{let{className:t,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...i})});i.displayName="Input"},6815:function(e,s,t){"use strict";t.d(s,{_:function(){return c}});var a=t(7437),r=t(2265),n=t(6394),i=t(535),l=t(4508);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.f,{ref:s,className:(0,l.cn)(o(),t),...r})});c.displayName=n.f.displayName},6512:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(7437),r=t(2265),n=t(5156),i=t(4508);let l=r.forwardRef((e,s)=>{let{className:t,orientation:r="horizontal",decorative:l=!0,...o}=e;return(0,a.jsx)(n.f,{ref:s,decorative:l,orientation:r,className:(0,i.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",t),...o})});l.displayName=n.f.displayName},2339:function(e,s,t){"use strict";t.d(s,{SP:function(){return c},dr:function(){return o},mQ:function(){return l},nU:function(){return d}});var a=t(7437),r=t(2265),n=t(200),i=t(4508);let l=n.fC,o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.aV,{ref:s,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r})});o.displayName=n.aV.displayName;let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.xz,{ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...r})});c.displayName=n.xz.displayName;let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.VY,{ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r})});d.displayName=n.VY.displayName}},function(e){e.O(0,[972,253,722,365,965,200,233,208,971,117,744],function(){return e(e.s=9927)}),_N_E=e.O()}]);